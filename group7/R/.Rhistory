library(XML)
library(httr)
library(bitops)
library(RCurl)
data11 = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index4674.html"
temp       = getURL(subUrlPath, encoding="big5")
xmldoc     = htmlParse(temp)
author     = xpathSApply(xmldoc, "//*[contains(concat( \" \", @class, \" \" ), concat( \" \", \"author\", \" \" ))]", xmlValue)
title      = xpathSApply(xmldoc,"//div[@class=\"title\"]",xmlValue)
url        = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
date       = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
title   <- gsub("\\n", "", title)
title   <- gsub("\\t", "", title)
allauthor = data.frame(author)
allurl    = data.frame(url)
alltitle  = data.frame(title)
alldate   = data.frame(date)
allresponseCount = data.frame(responseCount)
alldataFrame = data.frame(author,title,url,date,responseCount)
alldataBind = rbind(data11, alldataFrame)
write.table(alldataFrame, file = "movie4673.csv")
library(XML)
library(httr)
library(bitops)
library(RCurl)
data11 = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index4673.html"
temp       = getURL(subUrlPath, encoding="big5")
xmldoc     = htmlParse(temp)
author     = xpathSApply(xmldoc, "//*[contains(concat( \" \", @class, \" \" ), concat( \" \", \"author\", \" \" ))]", xmlValue)
title      = xpathSApply(xmldoc,"//div[@class=\"title\"]",xmlValue)
url        = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
date       = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
title   <- gsub("\\n", "", title)
title   <- gsub("\\t", "", title)
allauthor = data.frame(author)
allurl    = data.frame(url)
alltitle  = data.frame(title)
alldate   = data.frame(date)
allresponseCount = data.frame(responseCount)
alldataFrame = data.frame(author,title,url,date,responseCount)
alldataBind = rbind(data11, alldataFrame)
write.table(alldataFrame, file = "movie4673.csv")
library(XML)
library(httr)
library(bitops)
library(RCurl)
data11 = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index4673.html"
temp       = getURL(subUrlPath, encoding="big5")
xmldoc     = htmlParse(temp)
author     = xpathSApply(xmldoc, "//*[contains(concat( \" \", @class, \" \" ), concat( \" \", \"author\", \" \" ))]", xmlValue)
title      = xpathSApply(xmldoc,"//div[@class=\"title\"]",xmlValue)
url        = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
date       = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
title   <- gsub("\\n", "", title)
title   <- gsub("\\t", "", title)
allauthor = data.frame(author)
allurl    = data.frame(url)
alltitle  = data.frame(title)
alldate   = data.frame(date)
allresponseCount = data.frame(responseCount)
alldataFrame = data.frame(author,title,url,date,responseCount)
alldataBind = rbind(data11, alldataFrame)
write.table(alldataFrame, file = "movie4673.csv")
View(allurl)
library(XML)
library(XML)
library(httr)
library(bitops)
library(RCurl)
data11 = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index4672.html"
temp       = getURL(subUrlPath, encoding="big5")
xmldoc     = htmlParse(temp)
author     = xpathSApply(xmldoc, "//*[contains(concat( \" \", @class, \" \" ), concat( \" \", \"author\", \" \" ))]", xmlValue)
title      = xpathSApply(xmldoc,"//div[@class=\"title\"]",xmlValue)
url        = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
date       = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
title   <- gsub("\\n", "", title)
title   <- gsub("\\t", "", title)
allauthor = data.frame(author)
allurl    = data.frame(url)
alltitle  = data.frame(title)
alldate   = data.frame(date)
allresponseCount = data.frame(responseCount)
alldataFrame = data.frame(author,title,url,date,responseCount)
alldataBind = rbind(data11, alldataFrame)
write.table(alldataFrame, file = "movie4673.csv")
library(XML)
library(httr)
library(bitops)
library(RCurl)
data11 = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index4665.html"
temp       = getURL(subUrlPath, encoding="big5")
xmldoc     = htmlParse(temp)
author     = xpathSApply(xmldoc, "//*[contains(concat( \" \", @class, \" \" ), concat( \" \", \"author\", \" \" ))]", xmlValue)
title      = xpathSApply(xmldoc,"//div[@class=\"title\"]",xmlValue)
url        = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
date       = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
title   <- gsub("\\n", "", title)
title   <- gsub("\\t", "", title)
allauthor = data.frame(author)
allurl    = data.frame(url)
alltitle  = data.frame(title)
alldate   = data.frame(date)
allresponseCount = data.frame(responseCount)
alldataFrame = data.frame(author,title,url,date,responseCount)
alldataBind = rbind(data11, alldataFrame)
write.table(alldataFrame, file = "movie4673.csv")
library(XML)
library(httr)
library(bitops)
library(RCurl)
data11 = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index4650.html"
temp       = getURL(subUrlPath, encoding="big5")
xmldoc     = htmlParse(temp)
author     = xpathSApply(xmldoc, "//*[contains(concat( \" \", @class, \" \" ), concat( \" \", \"author\", \" \" ))]", xmlValue)
title      = xpathSApply(xmldoc,"//div[@class=\"title\"]",xmlValue)
url        = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
date       = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
title   <- gsub("\\n", "", title)
title   <- gsub("\\t", "", title)
allauthor = data.frame(author)
allurl    = data.frame(url)
alltitle  = data.frame(title)
alldate   = data.frame(date)
allresponseCount = data.frame(responseCount)
alldataFrame = data.frame(author,title,url,date,responseCount)
alldataBind = rbind(data11, alldataFrame)
write.table(alldataFrame, file = "movie4673.csv")
#rm(list=ls(all.names=TRUE))
#library
library(XML)
library(httr)
library(bitops)
library(RCurl)
#preset variables
startNo = 4670
endNo   = 4672
alldata = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index"
#for loop 1
for(page in startNo:endNo){
urlPath = paste(subUrlPath, page, ".html", sep='')
temp    = getURL(urlPath, encoding="big5")
xmldoc  = htmlParse(temp)
title   = xpathSApply(xmldoc, "//div[@class=\"title\"]",xmlValue)
title   = gsub("\\n", "", title)
title   = gsub("\\t", "", title)
author  = xpathSApply(xmldoc, "//div[@class='author']", xmlValue)
date    = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
path    = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
ErrorResult = tryCatch({
subdata = data.frame(title, path, date)
alldata = rbind(alldata, subdata)
},warning = function(war){print(paste("WARNING!!!:  ", urlPath))
},error   = function(err){print(paste("ERROR!!!:  ",urlPath))
},finally = {print(paste("End Try&Catch", urlPath))
})
}
write.table(alldata, file = "movie.csv")
subPath <- "https://www.ptt.cc"
for( i in 1:length(alldata[,1]) )
{
ipath    = paste(subPath, alldata$path[i], sep='')
print(ipath)
content  = getURL(ipath, encoding = "big5")
xmldoc   = htmlParse(content)
article  = xpathSApply(xmldoc, "//div[@id=\"main-content\"]", xmlValue)
filename = paste("./data/", i, ".csv", sep='')
write.csv(article,filename)
}
#rm(list=ls(all.names=TRUE))
#library
library(XML)
library(httr)
library(bitops)
library(RCurl)
#preset variables
startNo = 4652
endNo   = 4655
alldata = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index"
#for loop 1
for(page in startNo:endNo){
urlPath = paste(subUrlPath, page, ".html", sep='')
temp    = getURL(urlPath, encoding="big5")
xmldoc  = htmlParse(temp)
title   = xpathSApply(xmldoc, "//div[@class=\"title\"]",xmlValue)
title   = gsub("\\n", "", title)
title   = gsub("\\t", "", title)
author  = xpathSApply(xmldoc, "//div[@class='author']", xmlValue)
date    = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
path    = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
ErrorResult = tryCatch({
subdata = data.frame(title, path, date)
alldata = rbind(alldata, subdata)
},warning = function(war){print(paste("WARNING!!!:  ", urlPath))
},error   = function(err){print(paste("ERROR!!!:  ",urlPath))
},finally = {print(paste("End Try&Catch", urlPath))
})
}
write.table(alldata, file = "movie.csv")
subPath <- "https://www.ptt.cc"
for( i in 1:length(alldata[,1]) )
{
ipath    = paste(subPath, alldata$path[i], sep='')
print(ipath)
content  = getURL(ipath, encoding = "big5")
xmldoc   = htmlParse(content)
article  = xpathSApply(xmldoc, "//div[@id=\"main-content\"]", xmlValue)
filename = paste("./data/", i, ".csv", sep='')
write.csv(article,filename)
}
#rm(list=ls(all.names=TRUE))
#library
library(XML)
library(httr)
library(bitops)
library(RCurl)
#preset variables
startNo = 4652
endNo   = 4652
alldata = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index"
#for loop 1
for(page in startNo:endNo){
urlPath = paste(subUrlPath, page, ".html", sep='')
temp    = getURL(urlPath, encoding="UTF-8")
xmldoc  = htmlParse(temp)
title   = xpathSApply(xmldoc, "//div[@class=\"title\"]",xmlValue)
title   = gsub("\\n", "", title)
title   = gsub("\\t", "", title)
author  = xpathSApply(xmldoc, "//div[@class='author']", xmlValue)
date    = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
path    = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
ErrorResult = tryCatch({
subdata = data.frame(title, path, date)
alldata = rbind(alldata, subdata)
},warning = function(war){print(paste("WARNING!!!:  ", urlPath))
},error   = function(err){print(paste("ERROR!!!:  ",urlPath))
},finally = {print(paste("End Try&Catch", urlPath))
})
}
write.table(alldata, file = "movie4652.csv")
subPath <- "https://www.ptt.cc"
for( i in 1:length(alldata[,1]) )
{
ipath    = paste(subPath, alldata$path[i], sep='')
print(ipath)
content  = getURL(ipath, encoding = "big5")
xmldoc   = htmlParse(content)
article  = xpathSApply(xmldoc, "//div[@id=\"main-content\"]", xmlValue)
filename = paste("./data/", i, ".csv", sep='')
write.csv(article,filename)
}
startNo = 4652
#rm(list=ls(all.names=TRUE))
#library
library(XML)
library(httr)
library(bitops)
library(RCurl)
Sys.setlocale(category = "LC_ALL", locale = "cht")
#preset variables
startNo = 4652
endNo   = 4652
alldata = data.frame()
subUrlPath = "https://www.ptt.cc/bbs/movie/index"
#for loop 1
for(page in startNo:endNo){
urlPath = paste(subUrlPath, page, ".html", sep='')
temp    = getURL(urlPath, encoding="big5")
xmldoc  = htmlParse(temp)
title   = xpathSApply(xmldoc, "//div[@class=\"title\"]",xmlValue)
title   = gsub("\\n", "", title)
title   = gsub("\\t", "", title)
author  = xpathSApply(xmldoc, "//div[@class='author']", xmlValue)
date    = xpathSApply(xmldoc, "//div[@class='date']", xmlValue)
responseCount = xpathSApply(xmldoc, "//div[@class='nrec']", xmlValue)
path    = xpathSApply(xmldoc, "//div[@class='title']/a//@href")
ErrorResult = tryCatch({
subdata = data.frame(title, path, date)
alldata = rbind(alldata, subdata)
},warning = function(war){print(paste("WARNING!!!:  ", urlPath))
},error   = function(err){print(paste("ERROR!!!:  ",urlPath))
},finally = {print(paste("End Try&Catch", urlPath))
})
}
write.table(alldata, file = "movie4652.csv")
subPath <- "https://www.ptt.cc"
for( i in 1:length(alldata[,1]) )
{
ipath    = paste(subPath, alldata$path[i], sep='')
print(ipath)
content  = getURL(ipath, encoding = "big5")
xmldoc   = htmlParse(content)
article  = xpathSApply(xmldoc, "//div[@id=\"main-content\"]", xmlValue)
filename = paste("./data/", i, ".csv", sep='')
write.csv(article,filename)
}
rm(list=ls(all.names=TRUE))
library(XML)
library(RCurl)
library(httr)
Sys.setlocale(category = "LC_ALL", locale = "cht")
startNo = 4652
endNo   = 4652
subPath <- "https://www.ptt.cc/bbs/movie/index"
alldata = data.frame()
for( pid in startNo:endNo )
{
urlPath <- paste(subPath, pid, ".html", sep='')
temp    <- getURL(urlPath, encoding = "big5")
xmldoc  <- htmlParse(temp)
title   <- xpathSApply(xmldoc, "//div[@class=\"title\"]", xmlValue)
title   <- gsub("\n", "", title)
title   <- gsub("\t", "", title)
path    <- xpathSApply(xmldoc, "//div[@class='title']/a//@href")
Erroresult<- tryCatch({
subdata <- data.frame(title, path)
alldata <- rbind(alldata, subdata)
}, warning = function(war) {
print(paste("MY_WARNING:  ", urlPath))
}, error = function(err) {
print(paste("MY_ERROR:  ", urlPath))
}, finally = {
print(paste("End Try&Catch", urlPath))
})
}
write.table(alldata, file = "movie465222.csv")
suburlPath <- "https://www.ptt.cc"
for( i in 1:length(alldata[,1]) )
{
ipath   <- paste(suburlPath, alldata$path[i], sep='')
print(ipath)
content <- getURL(ipath, encoding = "big5")
xmldoc  <- htmlParse(content)
article <- xpathSApply(xmldoc, "//div[@id=\"main-content\"]", xmlValue)
filename<- paste("./data/", i, ".csv", sep='')
write.csv(article, filename)
}
